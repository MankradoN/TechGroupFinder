{"ast":null,"code":"import config from \"../config/engine.json\";\n/**\n \n */\n\nexport function getConfig() {\n  if (process.env.NODE_ENV === \"test\") {\n    return {};\n  }\n\n  if (config.engineName) return config;\n\n  if (typeof window !== \"undefined\" && window.appConfig && window.appConfig.engineName) {\n    return window.appConfig;\n  }\n\n  return {};\n}\n\nfunction toLowerCase(string) {\n  if (string) return string.toLowerCase();\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function getTitleField() {\n  // If no title field configuration has been provided, \n  // use a \"title\" field, if one exists\n  return getConfig().titleField || \"title\";\n}\nexport function getUrlField() {\n  return getConfig().urlField;\n}\nexport function getThumbnailField() {\n  return getConfig().thumbnailField;\n}\nexport function getFacetFields() {\n  return getConfig().facets || [];\n}\nexport function getSortFields() {\n  return getConfig().sortFields || [];\n}\nexport function getResultTitle(result) {\n  const titleField = getTitleField();\n  return result.getSnippet(titleField);\n} // Because if a field is configured to display as a \"title\", we don't want\n// to display it again in the fields list\n\nexport function stripUnnecessaryResultFields(resultFields) {\n  return Object.keys(resultFields).reduce((acc, n) => {\n    if ([\"_meta\", \"id\", toLowerCase(getTitleField()), toLowerCase(getUrlField()), toLowerCase(getThumbnailField())].includes(toLowerCase(n))) {\n      return acc;\n    }\n\n    acc[n] = resultFields[n];\n    return acc;\n  }, {});\n}\nexport function buildSearchOptionsFromConfig() {\n  const config = getConfig();\n  const searchFields = (config.searchFields || config.fields || []).reduce((acc, n) => {\n    acc = acc || {};\n    acc[n] = {};\n    return acc;\n  }, undefined);\n  const resultFields = (config.resultFields || config.fields || []).reduce((acc, n) => {\n    acc = acc || {};\n    acc[n] = {\n      raw: {},\n      snippet: {\n        size: 100,\n        fallback: true\n      }\n    };\n    return acc;\n  }, undefined); // We can't use url, thumbnail, or title fields unless they're actually\n  // in the reuslts.\n\n  if (config.urlField) {\n    resultFields[config.urlField] = {\n      raw: {},\n      snippet: {\n        size: 100,\n        fallback: true\n      }\n    };\n  }\n\n  if (config.thumbnailField) {\n    resultFields[config.thumbnailField] = {\n      raw: {},\n      snippet: {\n        size: 100,\n        fallback: true\n      }\n    };\n  }\n\n  if (config.titleField) {\n    resultFields[config.titleField] = {\n      raw: {},\n      snippet: {\n        size: 100,\n        fallback: true\n      }\n    };\n  }\n\n  const searchOptions = {};\n  searchOptions.result_fields = resultFields;\n  searchOptions.search_fields = searchFields;\n  return searchOptions;\n}\nexport function buildFacetConfigFromConfig() {\n  const config = getConfig();\n  const facets = (config.facets || []).reduce((acc, n) => {\n    acc = acc || {};\n    acc[n] = {\n      type: \"value\",\n      size: 100\n    };\n    return acc;\n  }, undefined);\n  return facets;\n}\nexport function buildSortOptionsFromConfig() {\n  const config = getConfig();\n  return [{\n    name: \"Relevance\",\n    value: \"\",\n    direction: \"\"\n  }, ...(config.sortFields || []).reduce((acc, sortField) => {\n    acc.push({\n      name: `${capitalizeFirstLetter(sortField)} ASC`,\n      value: sortField,\n      direction: \"asc\"\n    });\n    acc.push({\n      name: `${capitalizeFirstLetter(sortField)} DESC`,\n      value: sortField,\n      direction: \"desc\"\n    });\n    return acc;\n  }, [])];\n}\nexport function buildAutocompleteQueryConfig() {\n  const querySuggestFields = getConfig().querySuggestFields;\n\n  if (!querySuggestFields || !Array.isArray(querySuggestFields) || querySuggestFields.length === 0) {\n    return {};\n  }\n\n  return {\n    suggestions: {\n      types: {\n        documents: {\n          fields: getConfig().querySuggestFields\n        }\n      }\n    }\n  };\n}","map":{"version":3,"sources":["/Users/mnaomi/Documents/TechGroupFinder/app/src/config/config-helper.js"],"names":["config","getConfig","process","env","NODE_ENV","engineName","window","appConfig","toLowerCase","string","capitalizeFirstLetter","charAt","toUpperCase","slice","getTitleField","titleField","getUrlField","urlField","getThumbnailField","thumbnailField","getFacetFields","facets","getSortFields","sortFields","getResultTitle","result","getSnippet","stripUnnecessaryResultFields","resultFields","Object","keys","reduce","acc","n","includes","buildSearchOptionsFromConfig","searchFields","fields","undefined","raw","snippet","size","fallback","searchOptions","result_fields","search_fields","buildFacetConfigFromConfig","type","buildSortOptionsFromConfig","name","value","direction","sortField","push","buildAutocompleteQueryConfig","querySuggestFields","Array","isArray","length","suggestions","types","documents"],"mappings":"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","sourcesContent":["import config from \"../config/engine.json\";\n\n/**\n \n */\n\nexport function getConfig() {\n  if (process.env.NODE_ENV === \"test\") {\n    return {};\n  }\n\n  if (config.engineName) return config;\n\n  if (\n    typeof window !== \"undefined\" &&\n    window.appConfig &&\n    window.appConfig.engineName\n  ) {\n    return window.appConfig;\n  }\n\n  return {};\n}\n\nfunction toLowerCase(string) {\n  if (string) return string.toLowerCase();\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function getTitleField() {\n  // If no title field configuration has been provided, \n  // use a \"title\" field, if one exists\n  return getConfig().titleField || \"title\";\n}\n\nexport function getUrlField() {\n  return getConfig().urlField;\n}\n\nexport function getThumbnailField() {\n  return getConfig().thumbnailField;\n}\n\nexport function getFacetFields() {\n  return getConfig().facets || [];\n}\n\nexport function getSortFields() {\n  return getConfig().sortFields || [];\n}\n\nexport function getResultTitle(result) {\n  const titleField = getTitleField();\n\n  return result.getSnippet(titleField);\n}\n\n// Because if a field is configured to display as a \"title\", we don't want\n// to display it again in the fields list\nexport function stripUnnecessaryResultFields(resultFields) {\n  return Object.keys(resultFields).reduce((acc, n) => {\n    if (\n      [\n        \"_meta\",\n        \"id\",\n        toLowerCase(getTitleField()),\n        toLowerCase(getUrlField()),\n        toLowerCase(getThumbnailField()),\n      ].includes(toLowerCase(n))\n    ) {\n      return acc;\n    }\n\n    acc[n] = resultFields[n];\n    return acc;\n  }, {});\n}\n\nexport function buildSearchOptionsFromConfig() {\n  const config = getConfig();\n  const searchFields = (config.searchFields || config.fields || []).reduce(\n    (acc, n) => {\n      acc = acc || {};\n      acc[n] = {};\n      return acc;\n    },\n    undefined\n  );\n\n  const resultFields = (config.resultFields || config.fields || []).reduce(\n    (acc, n) => {\n      acc = acc || {};\n      acc[n] = {\n        raw: {},\n        snippet: {\n          size: 100,\n          fallback: true\n        }\n      };\n      return acc;\n    },\n    undefined\n  );\n\n  // We can't use url, thumbnail, or title fields unless they're actually\n  // in the reuslts.\n  if (config.urlField) {\n    resultFields[config.urlField] = {\n      raw: {},\n      snippet: {\n        size: 100,\n        fallback: true\n      }\n    };\n  }\n\n  if (config.thumbnailField) {\n    resultFields[config.thumbnailField] = {\n      raw: {},\n      snippet: {\n        size: 100,\n        fallback: true\n      }\n    };\n  }\n\n  if (config.titleField) {\n    resultFields[config.titleField] = {\n      raw: {},\n      snippet: {\n        size: 100,\n        fallback: true\n      }\n    };\n  }\n\n  const searchOptions = {};\n  searchOptions.result_fields = resultFields;\n  searchOptions.search_fields = searchFields;\n  return searchOptions;\n}\n\nexport function buildFacetConfigFromConfig() {\n  const config = getConfig();\n\n  const facets = (config.facets || []).reduce((acc, n) => {\n    acc = acc || {};\n    acc[n] = {\n      type: \"value\",\n      size: 100\n    };\n    return acc;\n  }, undefined);\n\n  return facets;\n}\n\nexport function buildSortOptionsFromConfig() {\n  const config = getConfig();\n  return [\n    {\n      name: \"Relevance\",\n      value: \"\",\n      direction: \"\"\n    },\n    ...(config.sortFields || []).reduce((acc, sortField) => {\n      acc.push({\n        name: `${capitalizeFirstLetter(sortField)} ASC`,\n        value: sortField,\n        direction: \"asc\"\n      });\n      acc.push({\n        name: `${capitalizeFirstLetter(sortField)} DESC`,\n        value: sortField,\n        direction: \"desc\"\n      });\n      return acc;\n    }, [])\n  ];\n}\n\nexport function buildAutocompleteQueryConfig() {\n  const querySuggestFields = getConfig().querySuggestFields;\n  if (\n    !querySuggestFields ||\n    !Array.isArray(querySuggestFields) ||\n    querySuggestFields.length === 0\n  ) {\n    return {};\n  }\n\n  return {\n    suggestions: {\n      types: {\n        documents: {\n          fields: getConfig().querySuggestFields\n        }\n      }\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}